require "ecmccfg","EC_RATE=2000"

#Master0
#   0  0:0   PREOP  +  Anybus-CC-ETC-TOBAS
#   1  0:1   PREOP  +  EK1100 EtherCAT-Koppler (2A E-Bus)
#   2  0:2   PREOP  +  EL1034 4Ch. Dig. Input 24V, potential-free, 10\ufffds
#   3  0:3   PREOP  +  EL1034 4Ch. Dig. Input 24V, potential-free, 10\ufffds
#   4  0:4   PREOP  +  EL1034 4Ch. Dig. Input 24V, potential-free, 10\ufffds
#   5  0:5   PREOP  +  EL3154 4K. Ana. Eingang 4-20mA
#   6  0:6   PREOP  +  EL2008 8K. Dig. Ausgang 24V, 0.5A
#   7  0:7   PREOP  +  EL2008 8K. Dig. Ausgang 24V, 0.5A
#   8  0:8   PREOP  +  EL2008 8K. Dig. Ausgang 24V, 0.5A
#   9  0:9   PREOP  +  EL2008 8K. Dig. Ausgang 24V, 0.5A
#  10  0:10  PREOP  +  EL9221-5000 \ufffdberstromschutz 24V DC, 1K., max. 10A, einstellbar
#  11  0:11  PREOP  +  Anybus-CC

${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=TOBAS"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EK1100"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL1034"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL1034"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL1034"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL3154"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL2008"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL2008"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL2008"
${SCRIPTEXEC} ${ECMC_CONFIG_ROOT}addSlave.cmd, "HW_DESC=EL2008"

#adding PLC code
## PLC 0
#$(SCRIPTEXEC) $(ecmccfg_DIR)loadPLCFile.cmd, "PLC_ID=0, SAMPLE_RATE_MS=100,FILE=./cfg/TestPLC.plc")



#- apply hardware configuration
${SCRIPTEXEC} ${ecmccfg_DIR}applyConfig.cmd

ecmcConfigOrDie "Cfg.EcSetDiagnostics(1)"
ecmcConfigOrDie "Cfg.EcEnablePrintouts(0)"
ecmcConfigOrDie "Cfg.EcSetDomainFailedCyclesLimit(100)"

# go active
${SCRIPTEXEC} ${ecmccfg_DIR}setAppMode.cmd


# The following lines were generated by "ioc install"
# Generated at: 2023-08-23 11:51:57.605321

cd "/ioc/MBTRF-CPCL-ILK"
